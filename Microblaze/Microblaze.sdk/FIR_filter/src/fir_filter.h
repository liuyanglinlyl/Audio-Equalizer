/*
 * fir_filter.h
 *
 *  Created on: Sep 12, 2019
 *      Author: stefan.quach
 */

#ifndef SRC_FIR_FILTER_H_
#define SRC_FIR_FILTER_H_

#include "xil_types.h"
#define NUM_ITERATIONS 1000

int16_t initFilter(int16_t* x, uint32_t nTaps);
int16_t filter(int16_t* x, uint16_t xIndex, int16_t* h, uint32_t nTaps);
#define NTAPS 61
static int16_t h[NTAPS] = {
	-29,
-26,
-22,
-3,
31,
69,
94,
88,
41,
-44,
-144,
-219,
-230,
-147,
25,
246,
440,
519,
413,
106,
-348,
-817,
-1121,
-1081,
-572,
427,
1808,
3349,
4757,
5744,
6098,
5744,
4757,
3349,
1808,
427,
-572,
-1081,
-1121,
-817,
-348,
106,
413,
519,
440,
246,
25,
-147,
-230,
-219,
-144,
-44,
41,
88,
94,
69,
31,
-3,
-22,
-26,
-29
};

static const int16_t xSamples[NUM_ITERATIONS] = {
		0,
		4555,
		9000,
		13230,
		17142,
		20643,
		23648,
		26086,
		27898,
		29040,
		29485,
		29223,
		28259,
		26618,
		24337,
		21473,
		18093,
		14279,
		10122,
		5723,
		1186,
		-3380,
		-7864,
		-12160,
		-16163,
		-19779,
		-22921,
		-25512,
		-27491,
		-28810,
		-29438,
		-29359,
		-28576,
		-27107,
		-24987,
		-22268,
		-19015,
		-15305,
		-11228,
		-6881,
		-2369,
		2199,
		6715,
		11070,
		15159,
		18884,
		22156,
		24896,
		27039,
		28533,
		29342,
		29447,
		28846,
		27552,
		25597,
		23027,
		19905,
		16306,
		12315,
		8028,
		3549,
		-1015,
		-5555,
		-9962,
		-14129,
		-17958,
		-21356,
		-24241,
		-26544,
		-28210,
		-29200,
		-29488,
		-29069,
		-27952,
		-26165,
		-23749,
		-20764,
		-17280,
		-13382,
		-9163,
		-4723,
		-170,
		4386,
		8838,
		13077,
		17003,
		20521,
		23546,
		26006,
		27842,
		29010,
		29481,
		29245,
		28308,
		26691,
		24433,
		21589,
		18227,
		14428,
		10282,
		5890,
		1356,
		-3210,
		-7700,
		-12004,
		-16021,
		-19653,
		-22813,
		-25426,
		-27428,
		-28773,
		-29427,
		-29375,
		-28617,
		-27173,
		-25077,
		-22379,
		-19145,
		-15450,
		-11385,
		-7047,
		-2539,
		2029,
		6549,
		10912,
		15012,
		18753,
		22043,
		24804,
		26971,
		28490,
		29325,
		29456,
		28881,
		27612,
		25681,
		23134,
		20031,
		16448,
		12469,
		8192,
		3718,
		-845,
		-5388,
		-9801,
		-13980,
		-17822,
		-21238,
		-24143,
		-26469,
		-28160,
		-29175,
		-29490,
		-29097,
		-28006,
		-26243,
		-23850,
		-20885,
		-17418,
		-13534,
		-9324,
		-4891,
		-341,
		4218,
		8675,
		12924,
		16863,
		20398,
		23443,
		25925,
		27785,
		28979,
		29476,
		29267,
		28355,
		26763,
		24528,
		21705,
		18361,
		14576,
		10442,
		6057,
		1526,
		-3041,
		-7535,
		-11848,
		-15877,
		-19525,
		-22704,
		-25339,
		-27365,
		-28735,
		-29415,
		-29389,
		-28658,
		-27239,
		-25167,
		-22490,
		-19274,
		-15595,
		-11542,
		-7212,
		-2709,
		1859,
		6383,
		10753,
		14865,
		18621,
		21929,
		24712,
		26901,
		28445,
		29306,
		29464,
		28915,
		27672,
		25764,
		23239,
		20156,
		16589,
		12624,
		8356,
		3887,
		-674,
		-5220,
		-9640,
		-13829,
		-17686,
		-21119,
		-24045,
		-26394,
		-28109,
		-29150,
		-29491,
		-29125,
		-28059,
		-26320,
		-23950,
		-21005,
		-17556,
		-13685,
		-9486,
		-5059,
		-511,
		4049,
		8512,
		12771,
		16723,
		20274,
		23339,
		25843,
		27728,
		28946,
		29471,
		29287,
		28401,
		26834,
		24622,
		21820,
		18494,
		14724,
		10601,
		6223,
		1696,
		-2871,
		-7370,
		-11692,
		-15733,
		-19397,
		-22595,
		-25251,
		-27301,
		-28696,
		-29402,
		-29403,
		-28698,
		-27304,
		-25255,
		-22600,
		-19403,
		-15740,
		-11699,
		-7377,
		-2879,
		1689,
		6216,
		10594,
		14718,
		18488,
		21815,
		24618,
		26831,
		28399,
		29287,
		29471,
		28948,
		27730,
		25847,
		23343,
		20280,
		16729,
		12778,
		8519,
		4056,
		-504,
		-5052,
		-9479,
		-13678,
		-17550,
		-21000,
		-23946,
		-26317,
		-28057,
		-29123,
		-29491,
		-29151,
		-28111,
		-26397,
		-24049,
		-21124,
		-17692,
		-13836,
		-9647,
		-5227,
		-682,
		3880,
		8349,
		12617,
		16583,
		20150,
		23234,
		25761,
		27669,
		28913,
		29464,
		29307,
		28447,
		26904,
		24716,
		21934,
		18627,
		14872,
		10760,
		6390,
		1867,
		-2702,
		-7205,
		-11535,
		-15589,
		-19268,
		-22485,
		-25163,
		-27236,
		-28656,
		-29389,
		-29416,
		-28737,
		-27368,
		-25343,
		-22709,
		-19531,
		-15883,
		-11855,
		-7542,
		-3048,
		1519,
		6049,
		10435,
		14570,
		18355,
		21700,
		24524,
		26760,
		28353,
		29266,
		29477,
		28980,
		27788,
		25929,
		23447,
		20403,
		16870,
		12931,
		8682,
		4225,
		-334,
		-4884,
		-9317,
		-13527,
		-17412,
		-20880,
		-23846,
		-26240,
		-28004,
		-29096,
		-29490,
		-29176,
		-28162,
		-26472,
		-24147,
		-21243,
		-17828,
		-13986,
		-9808,
		-5395,
		-852,
		3711,
		8185,
		12463,
		16441,
		20025,
		23129,
		25677,
		27610,
		28879,
		29456,
		29325,
		28491,
		26974,
		24808,
		22048,
		18758,
		15019,
		10918,
		6556,
		2037,
		-2532,
		-7039,
		-11378,
		-15444,
		-19139,
		-22375,
		-25073,
		-27171,
		-28616,
		-29374,
		-29427,
		-28774,
		-27431,
		-25429,
		-22818,
		-19658,
		-16027,
		-12011,
		-7707,
		-3218,
		1349,
		5882,
		10275,
		14421,
		18221,
		21584,
		24429,
		26688,
		28306,
		29245,
		29482,
		29011,
		27844,
		26009,
		23550,
		20526,
		17009,
		13084,
		8845,
		4394,
		-163,
		-4716,
		-9156,
		-13376,
		-17274,
		-20759,
		-23745,
		-26161,
		-27950,
		-29068,
		-29488,
		-29201,
		-28212,
		-26547,
		-24245,
		-21361,
		-17964,
		-14136,
		-9969,
		-5562,
		-1023,
		3542,
		8021,
		12308,
		16300,
		19900,
		23023,
		25593,
		27549,
		28844,
		29447,
		29343,
		28535,
		27042,
		24900,
		22161,
		18890,
		15165,
		11077,
		6722,
		2207,
		-2362,
		-6874,
		-11221,
		-15298,
		-19009,
		-22263,
		-24983,
		-27104,
		-28574,
		-29358,
		-29438,
		-28811,
		-27493,
		-25515,
		-22925,
		-19785,
		-16170,
		-12166,
		-7871,
		-3387,
		1178,
		5715,
		10115,
		14272,
		18087,
		21468,
		24333,
		26615,
		28257,
		29222,
		29485,
		29041,
		27900,
		26089,
		23652,
		20648,
		17148,
		13237,
		9007,
		4562,
		7,
		-4548,
		-8993,
		-13223,
		-17136,
		-20637,
		-23644,
		-26082,
		-27895,
		-29039,
		-29485,
		-29224,
		-28262,
		-26621,
		-24341,
		-21478,
		-18099,
		-14285,
		-10129,
		-5730,
		-1193,
		3372,
		7857,
		12153,
		16157,
		19774,
		22916,
		25508,
		27488,
		28808,
		29437,
		29360,
		28578,
		27110,
		24991,
		22273,
		19020,
		15311,
		11234,
		6888,
		2377,
		-2192,
		-6708,
		-11063,
		-15152,
		-18878,
		-22151,
		-24892,
		-27036,
		-28531,
		-29342,
		-29448,
		-28847,
		-27554,
		-25600,
		-23032,
		-19911,
		-16312,
		-12322,
		-8035,
		-3556,
		1008,
		5548,
		9955,
		14123,
		17952,
		21350,
		24236,
		26541,
		28208,
		29199,
		29488,
		29070,
		27955,
		26168,
		23754,
		20769,
		17286,
		13389,
		9170,
		4731,
		178,
		-4379,
		-8831,
		-13071,
		-16997,
		-20515,
		-23541,
		-26002,
		-27839,
		-29008,
		-29481,
		-29246,
		-28310,
		-26694,
		-24437,
		-21594,
		-18233,
		-14434,
		-10289,
		-5897,
		-1363,
		3203,
		7693,
		11997,
		16014,
		19647,
		22808,
		25422,
		27426,
		28771,
		29426,
		29375,
		28619,
		27176,
		25081,
		22384,
		19150,
		15456,
		11392,
		7054,
		2547,
		-2022,
		-6542,
		-10905,
		-15006,
		-18747,
		-22038,
		-24800,
		-26968,
		-28488,
		-29324,
		-29457,
		-28882,
		-27615,
		-25685,
		-23138,
		-20036,
		-16454,
		-12476,
		-8199,
		-3726,
		837,
		5380,
		9794,
		13973,
		17817,
		21232,
		24139,
		26466,
		28158,
		29174,
		29490,
		29099,
		28009,
		26246,
		23855,
		20890,
		17424,
		13540,
		9332,
		4899,
		348,
		-4210,
		-8668,
		-12918,
		-16857,
		-20393,
		-23438,
		-25921,
		-27783,
		-28977,
		-29476,
		-29268,
		-28357,
		-26766,
		-24532,
		-21710,
		-18367,
		-14583,
		-10449,
		-6064,
		-1534,
		3034,
		7528,
		11841,
		15871,
		19520,
		22700,
		25335,
		27363,
		28733,
		29415,
		29390,
		28660,
		27242,
		25171,
		22495,
		19280,
		15601,
		11549,
		7219,
		2716,
		-1852,
		-6375,
		-10746,
		-14859,
		-18615,
		-21924,
		-24708,
		-26898,
		-28443,
		-29305,
		-29464,
		-28916,
		-27674,
		-25768,
		-23243,
		-20161,
		-16595,
		-12630,
		-8363,
		-3895,
		667,
		5213,
		9633,
		13823,
		17680,
		21114,
		24041,
		26390,
		28107,
		29149,
		29491,
		29126,
		28062,
		26324,
		23954,
		21010,
		17562,
		13692,
		9493,
		5067,
		519,
		-4042,
		-8505,
		-12764,
		-16717,
		-20269,
		-23334,
		-25840,
		-27725,
		-28945,
		-29470,
		-29288,
		-28403,
		-26837,
		-24627,
		-21825,
		-18500,
		-14731,
		-10608,
		-6231,
		-1704,
		2864,
		7363,
		11685,
		15727,
		19391,
		22591,
		25247,
		27298,
		28694,
		29402,
		29403,
		28700,
		27307,
		25259,
		22605,
		19408,
		15746,
		11706,
		7384,
		2886,
		-1682,
		-6209,
		-10587,
		-14711,
		-18483,
		-21810,
		-24614,
		-26828,
		-28397,
		-29286,
		-29471,
		-28949,
		-27733,
		-25850,
		-23348,
		-20285,
		-16736,
		-12784,
		-8526,
		-4064,
		497,
		5045,
		9472,
		13672,
		17544,
		20994,
		23941,
		26314,
		28055,
		29122,
		29491,
		29152,
		28113,
		26400,
		24053,
		21129,
		17698,
		13842,
		9654,
		5235,
		689,
		-3873,
		-8342,
		-12610,
		-16577,
		-20145,
		-23230,
		-25757,
		-27666,
		-28912,
		-29463,
		-29308,
		-28449,
		-26907,
		-24720,
		-21939,
		-18632,
		-14878,
		-10767,
		-6397,
		-1874,
		2694,
		7198,
		11528,
		15583,
		19263,
		22481,
		25159,
		27234,
		28655,
		29388,
		29416,
		28738,
		27371,
		25347,
		22714,
		19536,
		15890,
		11862,
		7549,
		3056,
		-1511,
		-6042,
		-10428,
		-14563,
		-18349,
		-21695,
		-24520,
		-26757,
		-28351,
		-29265,
		-29477,
		-28981,
		-27790,
		-25932,
		-23452,
		-20409,
		-16876,
		-12938,
		-8689,
		-4232,
		326,
		4877,
		9310,
		13521,
		17406,
		20874,
		23841,
		26236,
		28002,
		29095,
		29490,
		29177,
		28165,
		26476,
		24152,
		21248,
		17834,
		13993,
		9815,
		5402,
		860,
		-3704,
		-8178,
		-12456,
		-16435,
		-20020,
		-23124,
		-25674,
		-27607,
		-28878,
		-29455,
		-29326,
		-28493,
		-26977,
		-24812,
		-22053,
		-18764,
		-15025,
		-10925,
		-6563,
		-2044,
		2524,
		7032,
		11371,
		15438,
		19133,
		22370,
		25070,
		27168,
		28614,
		29373,
		29428,
		28776,
		27434,
		25433,
		22822,
		19664,
		16033,
		12018,
		7714,
		3225,
		-1341,
		-5875,
		-10268,
		-14415,
		-18216,
		-21579,
		-24425
};

#endif /* SRC_FIR_FILTER_H_ */
